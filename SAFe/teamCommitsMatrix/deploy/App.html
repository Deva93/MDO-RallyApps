<!DOCTYPE html>
<html>
<head>
    <title>ART Commit Matrix</title>

    <script type="text/javascript" src="/apps/2.0rc3/sdk.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/q.js/1.0.1/q.js"></script>

    <script type="text/javascript">
        Rally.onReady(function () {
                (function(){var Ext=window.Ext4||window.Ext;Ext.define("IntelVelocity",{extend:"Ext.data.Model",fields:[{name:"Name",type:"string"},{name:"PlannedVelocity",type:"number"},{name:"RealVelocity",type:"number"}]}),Ext.define("IntelTeamCommits",{extend:"Ext.data.Model",fields:[{name:"Rank",type:"number"},{name:"Name",type:"string"},{name:"ObjectID",type:"string"},{name:"FormattedID",type:"string"},{name:"Commitment",type:"string"},{name:"Expected",type:"boolean"},{name:"Objective",type:"string"},{name:"Product",type:"string"},{name:"PlannedEnd",type:"number"}]}),Ext.define("IntelRisk",{extend:"Ext.data.Model",fields:[{name:"RiskID",type:"string"},{name:"ObjectID",type:"number"},{name:"FormattedID",type:"string"},{name:"FeatureName",type:"string"},{name:"Description",type:"string"},{name:"Impact",type:"string"},{name:"MitigationPlan",type:"string"},{name:"Urgency",type:"string"},{name:"Status",type:"string"},{name:"Contact",type:"string"},{name:"Checkpoint",type:"number"},{name:"Edited",type:"boolean"}]}),Ext.define("IntelDepTeam",{extend:"Ext.data.Model",fields:[{name:"TID",type:"string"},{name:"PID",type:"string"},{name:"Sup",type:"string"},{name:"USID",type:"string"},{name:"USName",type:"string"},{name:"A",type:"boolean"}]}),Ext.define("IntelPredDep",{extend:"Ext.data.Model",fields:[{name:"ObjectID",type:"number"},{name:"DependencyID",type:"string"},{name:"FormattedID",type:"string"},{name:"UserStoryName",type:"string"},{name:"Description",type:"string"},{name:"Checkpoint",type:"number"},{name:"Status",type:"string"},{name:"Predecessors",type:"auto"},{name:"Edited",type:"boolean"}]}),Ext.define("IntelSuccDep",{extend:"Ext.data.Model",fields:[{name:"ObjectID",type:"number"},{name:"DependencyID",type:"string"},{name:"SuccUserStoryName",type:"string"},{name:"SuccFormattedID",type:"string"},{name:"SuccProjectID",type:"string"},{name:"UserStoryName",type:"string"},{name:"FormattedID",type:"string"},{name:"ReleaseStartDate",type:"number"},{name:"ReleaseDate",type:"number"},{name:"Description",type:"string"},{name:"Checkpoint",type:"number"},{name:"Supported",type:"string"},{name:"Assigned",type:"boolean"},{name:"Edited",type:"boolean"}]}),Ext.define("IntelRiskWithProject",{extend:"Ext.data.Model",fields:[{name:"RiskID",type:"string"},{name:"ProjectName",type:"string"},{name:"ProjectID",type:"number"},{name:"Product",type:"string"},{name:"ObjectID",type:"number"},{name:"FormattedID",type:"string"},{name:"FeatureName",type:"string"},{name:"Description",type:"string"},{name:"Impact",type:"string"},{name:"Status",type:"string"},{name:"MitigationPlan",type:"string"},{name:"Urgency",type:"string"},{name:"Contact",type:"string"},{name:"Checkpoint",type:"number"},{name:"Edited",type:"boolean"}]}),Ext.define("IntelPredDepWithProject",{extend:"Ext.data.Model",fields:[{name:"DependencyID",type:"string"},{name:"ProjectName",type:"string"},{name:"ProjectID",type:"number"},{name:"Product",type:"string"},{name:"ObjectID",type:"number"},{name:"FormattedID",type:"string"},{name:"UserStoryName",type:"string"},{name:"Description",type:"string"},{name:"Checkpoint",type:"number"},{name:"Status",type:"string"},{name:"Predecessors",type:"auto"},{name:"Edited",type:"boolean"}]}),Ext.define("CommitsMatrixFeature",{extend:"Ext.data.Model",fields:[{name:"Rank",type:"number"},{name:"FormattedID",type:"string"},{name:"ObjectID",type:"number"},{name:"FeatureName",type:"string"},{name:"ProductName",type:"string"},{name:"PlannedEndDate",type:"number"}]}),Ext.define("CFEditorModel",{extend:"Ext.data.Model",fields:[{name:"FormattedID",type:"string"},{name:"Name",type:"string"},{name:"Release",type:"string"},{name:"CustomFieldValue",type:"string"}]})})();
                (function(){var Ext=window.Ext4||window.Ext;Ext.define("IntelRallyApp",{alias:"widget.intelrallyapp",extend:"Rally.app.App",_loadModels:function(){var me=this,promises=[],models={Project:"Project",UserStory:"HierarchicalRequirement",Feature:"PortfolioItem/Feature",Milestone:"PortfolioItem/Milestone"};return _.each(models,function(modelType,modelName){var deferred=Q.defer();Rally.data.WsapiModelFactory.getModel({type:modelType,success:function(loadedModel){me[modelName]=loadedModel,deferred.resolve()}}),promises.push(deferred.promise)}),Q.all(promises)},_loadProject:function(oid){var me=this,deferred=Q.defer();return oid?me.Project?(me.Project.load(oid,{fetch:["ObjectID","Releases","Children","Parent","Name"],context:{workspace:me.getContext().getWorkspace()._ref,project:null},callback:deferred.resolve}),deferred.promise):me._loadModels().then(function(){return me._loadProject(oid)}):Q.resolve()},_loadFeature:function(oid,projectRef){var me=this,deferred=Q.defer();return oid?me.Feature?(me.Feature.load(oid,{fetch:["Name","ObjectID","FormattedID","c_TeamCommits","c_Risks","Project","PlannedEndDate","Parent"],context:{workspace:me.getContext().getWorkspace()._ref,project:projectRef},callback:deferred.resolve}),deferred.promise):me._loadModels().then(function(){return me._loadFeature(oid,projectRef)}):Q.resolve()},_loadUserStory:function(oid,projectRef){var me=this,deferred=Q.defer();return oid?me.UserStory?(me.UserStory.load(oid,{fetch:["Name","ObjectID","Release","Project","Feature","FormattedID","Predecessors","Successors","c_Dependencies","Iteration","PlanEstimate"],context:{workspace:me.getContext().getWorkspace()._ref,project:projectRef},callback:deferred.resolve}),deferred.promise):me._loadModels().then(function(){return me._loadUserStory(oid,projectRef)}):Q.resolve()},_loadMilestone:function(oid,projectRef){var me=this,deferred=Q.defer();return oid?me.Milestone?(me.Milestone.load(oid,{fetch:["ObjectID","Parent","Name"],context:{workspace:me.getContext().getWorkspace()._ref,project:projectRef},callback:deferred.resolve}),deferred.promise):me._loadModels().then(function(){return me._loadMilestone(oid)}):Q.resolve()},_loadRootProject:function(projectRecord){if(!projectRecord)return Q.reject("Invalid arguments: LRP");var me=this,n=projectRecord.data.Name;return"All Scrums"===n||"All Scrums Sandbox"===n?Q(projectRecord):projectRecord.data.Parent?me._loadProject(projectRecord.data.Parent.ObjectID).then(function(parentRecord){return me._loadRootProject(parentRecord)}):Q.reject('You do not have viewer access to "All Scrums"!')},_loadTopProject:function(projectRecord){if(!projectRecord)return Q.reject("Invalid arguments: LTP");var me=this,n=projectRecord.data.Name;return projectRecord.data.Parent?me._loadProject(projectRecord.data.Parent.ObjectID).then(function(parentRecord){return me._loadTopProject(parentRecord)}):Q(projectRecord)},_projectInWhichTrain:function(projectRecord){if(projectRecord){var me=this,split=projectRecord.data.Name.split(" ART");if(split.length>1)return Q(projectRecord);var parent=projectRecord.data.Parent;return parent?me._loadProject(parent.ObjectID).then(function(parentRecord){return me._projectInWhichTrain(parentRecord)}):Q.reject("Project not in a train")}return Q.reject("Invalid arguments: PIWT")},_loadAllTrains:function(rootProjectRecord){if(!rootProjectRecord)return Q.reject("Invalid arguments: LAT");var me=this,store=Ext.create("Rally.data.wsapi.Store",{model:"Project",remoteSort:!1,limit:1/0,fetch:["Name","ObjectID"],context:{workspace:me.getContext().getWorkspace()._ref,project:null},filters:[{property:"Name",operator:"contains",value:" ART"},{property:"Name",operator:"All Scrums Sandbox"===rootProjectRecord.data.Name?"contains":"!contains",value:"Test"}]});return me._reloadStore(store).then(function(store){return console.log("AllTrainRecords loaded",store.data.items),Q(store)})},_loadRandomUserStory:function(projectRef){if(!projectRef)return Q.reject("Invalid arguments: LRUS");var me=this,store=Ext.create("Rally.data.wsapi.Store",{model:"HierarchicalRequirement",limit:5,pageSize:5,fetch:["Name","CreationDate","Project","ObjectID","FormattedID","Predecessors","Successors","c_Dependencies"],context:{workspace:me.getContext().getWorkspace()._ref,project:void 0},sorters:[{property:"CreationDate",direction:"DESC"}],filters:[{property:"Project",value:projectRef}]});return me._reloadStore(store).then(function(store){var records=store.data.items;return records.length?Q(records[Math.floor(Math.random()*records.length)]):Q(void 0)})},_getUserStoryInReleaseTimeFrameFilter:function(releaseRecord){var me=this,twoWeeks=12096e5,releaseStartPadding=new Date(1*new Date(releaseRecord.data.ReleaseStartDate)+twoWeeks).toISOString(),releaseEndPadding=new Date(1*new Date(releaseRecord.data.ReleaseDate)-twoWeeks).toISOString();return Ext.create("Rally.data.wsapi.Filter",{property:"Release.ReleaseStartDate",operator:"<",value:releaseStartPadding}).and(Ext.create("Rally.data.wsapi.Filter",{property:"Release.ReleaseDate",operator:">",value:releaseEndPadding})).or(Ext.create("Rally.data.wsapi.Filter",{property:"Feature.Release.ReleaseStartDate",operator:"<",value:releaseStartPadding}).and(Ext.create("Rally.data.wsapi.Filter",{property:"Feature.Release.ReleaseDate",operator:">",value:releaseEndPadding})))},_loadRandomUserStoryFromRelease:function(projectRef,releaseName){if(!projectRef||!releaseName)return Q.reject("Invalid arguments: LRUSFR");var me=this,store=Ext.create("Rally.data.wsapi.Store",{model:"HierarchicalRequirement",limit:5,pageSize:5,fetch:["Name","CreationDate","Project","ObjectID","FormattedID","Predecessors","Successors","c_Dependencies"],context:{workspace:me.getContext().getWorkspace()._ref,project:void 0},sorters:[{property:"CreationDate",direction:"DESC"}],filters:[Ext.create("Rally.data.wsapi.Filter",{property:"Project",value:projectRef}).and(Ext.create("Rally.data.wsapi.Filter",{property:"Release.Name",value:releaseName}).or(Ext.create("Rally.data.wsapi.Filter",{property:"Feature.Release.Name",value:releaseName})))]});return me._reloadStore(store).then(function(store){var records=store.data.items;return records.length?Q(records[Math.floor(Math.random()*records.length)]):Q(void 0)})},_loadRandomUserStoryFromReleaseTimeframe:function(projectRef,releaseRecord){if(!projectRef||!releaseRecord)return Q.reject("Invalid arguments: LRUSFR");var me=this,store=Ext.create("Rally.data.wsapi.Store",{model:"HierarchicalRequirement",limit:5,pageSize:5,fetch:["Name","CreationDate","Project","ObjectID","FormattedID","Predecessors","Successors","c_Dependencies"],context:{workspace:me.getContext().getWorkspace()._ref,project:void 0},sorters:[{property:"CreationDate",direction:"DESC"}],filters:[Ext.create("Rally.data.wsapi.Filter",{property:"Project",value:projectRef}).and(me._getUserStoryInReleaseTimeFrameFilter(releaseRecord))]});return me._reloadStore(store).then(function(store){var records=store.data.items;return records.length?Q(records[Math.floor(Math.random()*records.length)]):Q(void 0)})},_loadUserStoryByFID:function(formattedID,projectRef){if(!formattedID||!projectRef)return Q.reject("Invalid arguments: LUSBFID");var me=this,store=Ext.create("Rally.data.wsapi.Store",{model:"HierarchicalRequirement",limit:1,pageSize:1,fetch:["Name","Project","ObjectID","FormattedID","Predecessors","Successors","c_Dependencies"],context:{workspace:me.getContext().getWorkspace()._ref,project:void 0},filters:[{property:"FormattedID",value:formattedID},{property:"Project",value:projectRef}]});return me._reloadStore(store).then(function(store){return Q(store.data.items.pop())})},_loadProjectByName:function(name){if(!name)return Q.reject("Invalid arguments: LPBN");var me=this,store=Ext.create("Rally.data.wsapi.Store",{model:"Project",limit:1,pageSize:1,fetch:["Name","ObjectID"],context:{workspace:me.getContext().getWorkspace()._ref,project:null},filters:[{property:"Name",value:name}]});return me._reloadStore(store).then(function(store){return Q(store.data.items.pop())})},_getFeatureFilter:function(trainRecord,releaseRecord){if(!trainRecord||!releaseRecord)throw"invalid arguments: GFF";var me=this,trainName=trainRecord.data.Name.split(" ART")[0],relSplit=releaseRecord.data.Name.split(" "),coreFilter=Ext.create("Rally.data.wsapi.Filter",{property:"Release.Name",value:releaseRecord.data.Name});return trainName=2==relSplit.length?relSplit[1]:trainName,"Test ART (P&E)"==trainRecord.data.Name?Ext.create("Rally.data.wsapi.Filter",{property:"Project.Name",value:"Test ART (P&E)"}).and(coreFilter):Ext.create("Rally.data.wsapi.Filter",{property:"Project.Parent.Name",value:trainName+" POWG Portfolios"}).or(Ext.create("Rally.data.wsapi.Filter",{property:"Project.Name",value:trainName+" POWG Portfolios"})).and(coreFilter)},_getProductFilter:function(trainRecord){if(!trainRecord)throw"invalid arguments: GPF";var me=this,trainName=trainRecord.data.Name.split(" ART")[0];return"Test"===trainName?Ext.create("Rally.data.wsapi.Filter",{property:"Project.Name",value:"Test ART (P&E)"}):Ext.create("Rally.data.wsapi.Filter",{property:"Project.Parent.Name",value:trainName+" POWG Portfolios"}).or(Ext.create("Rally.data.wsapi.Filter",{property:"Project.Name",value:trainName+" POWG Portfolios"}))},_loadProducts:function(trainRecord){if(!trainRecord)return Q.reject("Invalid arguments: LPROD");var me=this,store=Ext.create("Rally.data.wsapi.Store",{model:"PortfolioItem/Product",limit:1/0,remoteSort:!1,fetch:["Name"],context:{workspace:me.getContext().getWorkspace()._ref,project:null},filters:[me._getProductFilter(trainRecord)]});return me._reloadStore(store).then(function(store){return console.log("Products loaded",store.data.items),Q(store)})},_addValidProjectsToList:function(projTree,hash){var me=this,curProj=projTree.ProjectRecord;curProj.data.TeamMembers.Count>0&&(hash[curProj.data.ObjectID]=curProj);for(var childProjRef in projTree)"ProjectRecord"!==childProjRef&&me._addValidProjectsToList(projTree[childProjRef],hash)},_loadValidProjects:function(rootProjectRecord){if(!rootProjectRecord)return Q.reject("Invalid arguments: LVP");var me=this,validProjects={},projTree={},store=Ext.create("Rally.data.wsapi.Store",{model:"Project",fetch:["Name","Parent","ObjectID","TeamMembers"],limit:1/0,context:{workspace:me.getContext().getWorkspace()._ref,project:null}});return me._reloadStore(store).then(function(store){for(var projects=store.data.items,i=0,len=projects.length;len>i;++i){var project=projects[i],thisRef=project.data.ObjectID,parentRef=project.data.Parent?project.data.Parent.ObjectID:void 0;projTree[thisRef]||(projTree[thisRef]={}),projTree[thisRef].ProjectRecord=project,parentRef&&(projTree[parentRef]||(projTree[parentRef]={}),projTree[parentRef][thisRef]=projTree[thisRef])}return me._addValidProjectsToList(projTree[rootProjectRecord.data.ObjectID],validProjects),console.log("valid projects",validProjects),Q(validProjects)})},_allChildProjectToList:function(projTree,hash){var me=this,curProj=projTree.ProjectRecord;hash[curProj.data.ObjectID]=curProj;for(var childProjRef in projTree)"ProjectRecord"!==childProjRef&&me._allChildProjectToList(projTree[childProjRef],hash)},_loadAllChildrenProjects:function(rootProjectRecord){if(!rootProjectRecord)return Q.reject("Invalid arguments: LACP");var me=this,childrenProjects={},projTree={},store=Ext.create("Rally.data.wsapi.Store",{model:"Project",fetch:["Name","Parent","ObjectID"],limit:1/0,context:{workspace:me.getContext().getWorkspace()._ref,project:null}});return me._reloadStore(store).then(function(store){for(var projects=store.data.items,i=0,len=projects.length;len>i;++i){var project=projects[i],thisRef=project.data.ObjectID,parentRef=project.data.Parent?project.data.Parent.ObjectID:void 0;projTree[thisRef]||(projTree[thisRef]={}),projTree[thisRef].ProjectRecord=project,parentRef&&(projTree[parentRef]||(projTree[parentRef]={}),projTree[parentRef][thisRef]=projTree[thisRef])}return me._allChildProjectToList(projTree[rootProjectRecord.data.ObjectID],childrenProjects),console.log("childrenProjects",childrenProjects),Q(childrenProjects)})},_allLeafProjectsToList:function(projTree,hash){var me=this,curProj=projTree.ProjectRecord;0===curProj.data.Children.Count&&(hash[curProj.data.ObjectID]=curProj);for(var childProjRef in projTree)"ProjectRecord"!==childProjRef&&me._allLeafProjectsToList(projTree[childProjRef],hash)},_loadAllLeafProjects:function(rootProjectRecord){if(!rootProjectRecord)return Q.reject("Invalid arguments: LALP");var me=this,childrenProjects={},projTree={},store=Ext.create("Rally.data.wsapi.Store",{model:"Project",fetch:["Name","Parent","ObjectID","Children"],limit:1/0,context:{workspace:me.getContext().getWorkspace()._ref,project:null}});return me._reloadStore(store).then(function(store){for(var projects=store.data.items,i=0,len=projects.length;len>i;++i){var project=projects[i],thisRef=project.data.ObjectID,parentRef=project.data.Parent?project.data.Parent.ObjectID:void 0;projTree[thisRef]||(projTree[thisRef]={}),projTree[thisRef].ProjectRecord=project,parentRef&&(projTree[parentRef]||(projTree[parentRef]={}),projTree[parentRef][thisRef]=projTree[thisRef])}return me._allLeafProjectsToList(projTree[rootProjectRecord.data.ObjectID],childrenProjects),console.log("childrenProjects",childrenProjects),Q(childrenProjects)})},_reloadStore:function(store){var deferred=Q.defer();return store.load({callback:function(records,operation,success){success?deferred.resolve(store):deferred.reject(operation.getError()||"Could not load data")}}),deferred.promise}})})();
                (function(){var Ext=window.Ext4||window.Ext;Ext.define("WorkweekDropdown",{extend:"Ext.data.Model",fields:[{name:"Workweek",type:"string"},{name:"DateVal",type:"number"}]})})();
                (function(){var Ext=window.Ext4||window.Ext;Ext.define("WindowListener",{__initWindowEventListener:function(eventName){var me=this;me._windowListeners||(me._windowListeners={}),me._windowListeners[eventName]=[],window.parent["on"+eventName]=function(event){for(var listeners=me._windowListeners[eventName],i=0,len=listeners.length;len>i;++i)listeners[i](event)}},_addWindowEventListener:function(eventName,fn){var me=this;me._windowListeners&&me._windowListeners[eventName]||me.__initWindowEventListener(eventName),me._windowListeners[eventName].push(fn)},_fireParentWindowEvent:function(eventName){var me=this;if(me._windowListeners&&me._windowListeners[eventName])for(var listeners=me._windowListeners[eventName],i=0,len=listeners.length;len>i;++i)listeners[i]()}})})();
                (function(){var Ext=window.Ext4||window.Ext;Ext.define("IframeResize",{requires:["WindowListener"],_applyIframeResizeToContents:function(){for(var w=window,p=w.parent,pd=w.parent.document,l=w.location,iframe=window.frameElement?Ext.get(window.frameElement):me.el,ip1=iframe.parentNode,ip2=iframe.parentNode.parentNode.parentNode.parentNode.parentNode.parentNode,height=0,next=this.down();next;)height+=next.getHeight()+1*next.getEl().getMargin("tb")+1*next.getEl().getPadding("tb"),next=next.next();height+=150,ip1.style.height=height+"px",ip2.style.height=height+"px",iframe.style.height=height+"px"},_initIframeResizeToContents:function(){var me=this;me._addWindowEventListener&&me._addWindowEventListener("resize",function(){me._applyIframeResizeToContents()})},_applyIframeResizeToWindow:function(){var iframe=window.frameElement?Ext.get(window.frameElement):me.el,i=iframe.dom,portlet=iframe.up(".x-portlet"),portalColumn=portlet.up(".x-portal-column"),dashboard=portlet.up("#mydash_portlet");height=window.parent.innerHeight-70,height-=200,iframe.style.height=height+"px",ip1.style.height=height+"px",height+=30,ip2.style.height=height+"px"},_initIframeResizeToWindow:function(){var me=this;me._addWindowEventListener&&me._addWindowEventListener("resize",function(){me._applyIframeResizeToWindow()}),me._applyIframeResizeToWindow()},_fixRallyDashboard:function(){for(var me=this,bottomEl=window.frameElement?Ext.get(window.frameElement):me.el,portlet=bottomEl.up(".x-portlet"),portalColumn=portlet.up(".x-portal-column"),dashboard=portlet.up("#mydash_portlet"),domNodeW=bottomEl.dom,domNodeH=bottomEl.dom,innerHeight=window.parent.innerHeight,innerWidth=window.parent.innerWidth;;){if(domNodeW.style.width=innerWidth-4+"px",domNodeW.style.padding="0",domNodeW.style.margin="0","mydash_portlet"===domNodeW.id)break;domNodeW=domNodeW.parentNode}for(;;){if(domNodeH.style.height=innerHeight-135+"px",domNodeH.classList.contains("x-portlet"))break;domNodeH=domNodeH.parentNode}dashboard.dom.style.height=innerHeight-65+"px",portlet.dom.style.height=innerHeight-105+"px",dashboard.dom.style.padding="0 2px 0 2px"},_initFixRallyDashboard:function(){var me=this;me._addWindowEventListener&&me._addWindowEventListener("resize",function(){me._fixRallyDashboard()}),me._fixRallyDashboard()},_disableResizeHandle:function(){var me=this,handle;handle=window.frameElement?Ext.get(window.frameElement).up(".x-portlet").down(".x-resizable-handle"):me.el.up(".x-portlet").down(".x-resizable-handle"),handle&&(handle.hide(),handle.dom.onshow=function(){handle&&handle.hide()})},_initDisableResizeHandle:function(){var me=this;me._addWindowEventListener&&me._addWindowEventListener("resize",function(){me._disableResizeHandle()}),me._disableResizeHandle()}})})();
                (function(){var Ext=window.Ext4||window.Ext;Ext.define("PrettyAlert",{__getMessageBoxY:function(){var me=this,bottomEl=window.frameElement?Ext.get(window.frameElement):me.el,ph=window.parent.getWindowHeight(),ps=window.parent.getScrollY(),ofy=ps+bottomEl.dom.getBoundingClientRect().top,iyOffset=Math.floor(ph/2-ofy+ps-50);return 0>iyOffset?0:iyOffset},_alert:function(title,str){1>arguments.length||(1===arguments.length&&(str=title,title=""),Ext.MessageBox.alert(title,str).setY(this.__getMessageBoxY()),setTimeout(function(){for(var x=Ext.MessageBox.down("button");x.isHidden();)x=x.nextSibling();x.focus()},20))},_confirm:function(title,str,fn){2>arguments.length||(2===arguments.length&&(fn=str,str=title,title=""),"function"!=typeof fn&&(fn=function(){}),Ext.MessageBox.confirm(title,str,fn).setY(this.__getMessageBoxY()),setTimeout(function(){for(var x=Ext.MessageBox.down("button");x.isHidden();)x=x.nextSibling();x.focus()},20))}})})();
                (function(){var Ext=window.Ext4||window.Ext,intel_ww={},SECOND=1e3,MINUTE=60*SECOND,HOUR=60*MINUTE,DAY=24*HOUR,WEEK=7*DAY;Ext.define("IntelWorkweek",{_getWorkweek:function(_date){var date=new Date(_date),yearStart=new Date(date.getFullYear(),0,1),dayIndex=yearStart.getDay(),ww01Start=new Date(yearStart-dayIndex*DAY),utcDateMillis=Date.UTC(date.getFullYear(),date.getMonth(),date.getDate()),ww01Millis=Date.UTC(ww01Start.getFullYear(),ww01Start.getMonth(),ww01Start.getDate()),timeDiff=utcDateMillis-ww01Millis,ww=Math.floor(timeDiff/WEEK)+1,leap=0===date.getFullYear()%4,weekCount=leap&&dayIndex>=5||!leap&&6===dayIndex?53:52;return ww>weekCount?1:ww},_getWeekCount:function(_date){var date=new Date(_date),leap=0===date.getFullYear()%4,day=new Date(date.getFullYear(),0,1).getDay();return leap&&day>=5||!leap&&6===day?53:52},_roundDateDownToWeekStart:function(_date){var date=new Date(_date),day=date.getDay(),monthDate=date.getDate(),month=date.getMonth(),year=date.getFullYear(),sundayMidday=new Date(1*new Date(year,month,monthDate)-(day*DAY-.5*DAY));return new Date(sundayMidday.getFullYear(),sundayMidday.getMonth(),sundayMidday.getDate())},_getWorkweekDates:function(startDate,endDate){for(var startWeekDate=this._roundDateDownToWeekStart(startDate),endWeekDate=this._roundDateDownToWeekStart(endDate),startMillis=Date.UTC(startWeekDate.getFullYear(),startWeekDate.getMonth(),startWeekDate.getDate()),endMillis=Date.UTC(endWeekDate.getFullYear(),endWeekDate.getMonth(),endWeekDate.getDate()),totalWeeks=Math.floor((endMillis-startMillis)/WEEK)+1,weeks=Array(totalWeeks),i=0;totalWeeks>i;++i){var sundayMidday=new Date(1*startWeekDate+(WEEK*i+12*HOUR));weeks[i]=new Date(sundayMidday.getFullYear(),sundayMidday.getMonth(),sundayMidday.getDate())}return weeks},_workweekToDate:function(ww,year){var yearStart=new Date(year,0,1),dayIndex=yearStart.getDay(),ww01StartMidday=new Date(yearStart-(dayIndex*DAY-.5*DAY)),sundayMidday=new Date(1*ww01StartMidday+(ww-1)*WEEK);return new Date(sundayMidday.getFullYear(),sundayMidday.getMonth(),sundayMidday.getDate())},_getWorkWeeksForDropdown:function(releaseStartDate,releaseEndDate){for(var workweeks=this._getWorkweekDates(releaseStartDate,releaseEndDate),data=Array(workweeks.length),i=0,len=workweeks.length;len>i;++i)data[i]={Workweek:"ww"+this._getWorkweek(workweeks[i]),DateVal:1*workweeks[i]};return data}})})();
                (function(){var Ext=window.Ext4||window.Ext;Ext.define("ReleaseQuery",{_loadAllReleases:function(projectRecord){var deferred=Q.defer();return Ext.create("Rally.data.wsapi.Store",{model:"Release",limit:1/0,autoLoad:!0,fetch:["Name","ObjectID","ReleaseDate","ReleaseStartDate","Project"],context:{workspace:this.getContext().getWorkspace()._ref,project:null},filters:[{property:"Project.ObjectID",value:projectRecord.data.ObjectID}],listeners:{load:{fn:function(releaseStore,releaseRecords){console.log("releases loaded:",releaseRecords),deferred.resolve(releaseStore)},single:!0}}}),deferred.promise},_loadReleasesInTheFuture:function(projectRecord){var deferred=Q.defer();return Ext.create("Rally.data.wsapi.Store",{model:"Release",limit:1/0,autoLoad:!0,fetch:["Name","ObjectID","ReleaseDate","ReleaseStartDate","Project"],context:{workspace:this.getContext().getWorkspace()._ref,project:null},filters:[{property:"Project.ObjectID",value:projectRecord.data.ObjectID},{property:"ReleaseDate",operator:">=",value:(new Date).toISOString()}],listeners:{load:{fn:function(releaseStore,releaseRecords){console.log("releases loaded:",releaseRecords),deferred.resolve(releaseStore)},single:!0}}}),deferred.promise},_loadReleasesWithName:function(releaseName,nameContains){var deferred=Q.defer();return Ext.create("Rally.data.wsapi.Store",{model:"Release",limit:1/0,autoLoad:!0,fetch:["Name","ObjectID","ReleaseDate","ReleaseStartDate","Project","TeamMembers"],context:{workspace:this.getContext().getWorkspace()._ref,project:null},filters:[{property:"Name",value:releaseName},{property:"Project.Name",operator:"contains",value:nameContains},{property:"Project.Children.Name",operator:"=",value:""},{property:"Project.Name",operator:"!contains",value:" ART"}],listeners:{load:{fn:function(store,records){console.log("releasesWithName loaded:",records),deferred.resolve(store)},single:!0}}}),deferred.promise},_loadReleaseByNameForProject:function(releaseName,projectRecord){var deferred=Q.defer();return Ext.create("Rally.data.wsapi.Store",{model:"Release",limit:1/0,autoLoad:!0,fetch:["Name","ObjectID","ReleaseDate","ReleaseStartDate","Project"],context:{workspace:this.getContext().getWorkspace()._ref,project:null},filters:[{property:"Name",value:releaseName},{property:"Project",value:projectRecord.data._ref}],listeners:{load:{fn:function(store,records){deferred.resolve(records.pop())},single:!0}}}),deferred.promise},_loadReleasesByNameContainsForProject:function(releaseName,projectRecord){var deferred=Q.defer();return Ext.create("Rally.data.wsapi.Store",{model:"Release",limit:1/0,autoLoad:!0,fetch:["Name","ObjectID","ReleaseDate","ReleaseStartDate","Project"],context:{workspace:this.getContext().getWorkspace()._ref,project:null},filters:[{property:"Name",operator:"contains",value:releaseName},{property:"Project",value:projectRecord.data._ref}],listeners:{load:{fn:function(store,records){deferred.resolve(records)},single:!0}}}),deferred.promise},_loadReleasesAfterGivenDate:function(projectRecord,givenDate){var deferred=Q.defer();return Ext.create("Rally.data.wsapi.Store",{model:"Release",limit:1/0,autoLoad:!0,fetch:["Name","ObjectID","ReleaseDate","ReleaseStartDate","Project"],context:{workspace:this.getContext().getWorkspace()._ref,project:null},filters:[{property:"Project.ObjectID",value:projectRecord.data.ObjectID},{property:"ReleaseDate",operator:">=",value:new Date(givenDate).toISOString()}],listeners:{load:{fn:function(releaseStore,releaseRecords){console.log("releases loaded:",releaseRecords),deferred.resolve(releaseStore)},single:!0}}}),deferred.promise},_getScopedRelease:function(releaseRecords,projectOID,appPrefs){var me=this,d=new Date,rs=releaseRecords,prefOID=appPrefs&&appPrefs.projs&&appPrefs.projs[projectOID]&&appPrefs.projs[projectOID].Release;return prefOID&&_.find(rs,function(r){return r.data.ObjectID==prefOID})||_.find(rs,function(r){return new Date(r.data.ReleaseDate)>=d&&d>=new Date(r.data.ReleaseStartDate)})||_.reduce(rs,function(best,r){if(null===best)return r;var d1=new Date(best.data.ReleaseStartDate),d2=new Date(r.data.ReleaseStartDate),now=new Date;return Math.abs(d1-now)<Math.abs(d2-now)?best:r},null)}})})();
                (function(){var Ext=window.Ext4||window.Ext;Ext.define("AsyncQueue",{QueueOfFuncs:{},_dequeue:function(queueName){var me=this;if(queueName=queueName||"undefined",me.QueueOfFuncs[queueName]){if(me.QueueOfFuncs[queueName].shift(),!me.QueueOfFuncs[queueName].length)return;me.QueueOfFuncs[queueName][0].call(me,me._dequeue.bind(me,queueName))}},_enqueue:function(callback,queueName){var me=this;return queueName=queueName||"undefined","function"!=typeof callback?console.log("ERR: not a function",callback):(me.QueueOfFuncs[queueName]&&me.QueueOfFuncs[queueName].length?me.QueueOfFuncs[queueName].push(callback):(me.QueueOfFuncs[queueName]=[callback],callback.call(me,me._dequeue.bind(me,queueName))),void 0)}})})();
                (function(){var Ext=window.Ext4||window.Ext;Ext.define("UserAppPreferences",{_prefName:"intel-user-app-preferences",_loadPreferences:function(){var me=this,deferred=Q.defer();return Rally.data.PreferenceManager.load({filterByUser:!0,filterByName:me._prefName,success:function(prefs){var appPrefs=prefs[me._prefName];try{appPrefs=JSON.parse(appPrefs)}catch(e){appPrefs={projs:{},refresh:30}}console.log("loaded prefs",appPrefs),deferred.resolve(appPrefs)},failure:deferred.reject}),deferred.promise},_savePreferences:function(prefs){var me=this,s={},deferred=Q.defer();return prefs={projs:prefs.projs,refresh:prefs.refresh},s[me._prefName]=JSON.stringify(prefs),console.log("saving prefs",prefs),Rally.data.PreferenceManager.update({filterByUser:!0,settings:s,success:deferred.resolve,failure:deferred.reject}),deferred.promise}})})();
                (function(){var Ext=window.Ext4||window.Ext;Ext.define("Intel.form.field.FixedComboBox",{extend:"Ext.form.field.ComboBox",alias:["widget.intelfixedcombo","widget.intelfixedcombobox"],constructor:function(options){options=options||{},options=Ext.merge({editable:!1,allowBlank:!1,queryMode:"local",listeners:{focus:function(combo){combo.setValue(""),combo.expand()}}},options),this.callParent([options])}})})();
                (function(){var Ext=window.Ext4||window.Ext;Ext.define("Intel.form.field.ReleasePicker",{extend:"Intel.form.field.FixedComboBox",alias:["widget.intelreleasepicker"],constructor:function(options){options.releases&&options.currentRelease&&(options.displayField="Name",options.value=options.currentRelease.data.Name,options.store=Ext.create("Ext.data.Store",{fields:["Name"],sorters:[function(o1,o2){return o1.data.Name>o2.data.Name?-1:1}],data:_.map(options.releases,function(r){return{Name:r.data.Name}})}),options.fieldLabel=options.fieldLabel||"Release:",options.editable=options.editable||!1,options.width=options.width||240,options.labelWidth=options.labelWidth||50,this.callParent([options]))}})})();
                (function(){var Ext=window.Ext4||window.Ext;Ext.define("Intel.data.proxy.SessionStorage",{extend:"Ext.data.proxy.SessionStorage",alias:"proxy.fastsessionproxy",constructor:function(cfg){var me=this;me.callParent(arguments)},create:function(operation,callback,scope){var me=this,records=operation.records,length=records.length,ids=me.getIds(),id,record,i;for(operation.setStarted(),void 0===me.isHierarchical&&(me.isHierarchical=!!records[0].isNode,me.isHierarchical&&me.getStorageObject().setItem(me.getTreeKey(),!0)),i=0;length>i;i++)record=records[i],record.phantom?(record.phantom=!1,id=me.getNextId()):id=record.getId(),record.beginEdit(),me.setRecord(record,id),record.endEdit(!0),record.commit(!0),ids.push(id);me.setIds(ids),operation.setCompleted(),operation.setSuccessful(),"function"==typeof callback&&callback.call(scope||me,operation)},update:function(operation,callback,scope){var records=operation.records,length=records.length,ids=this.getIds(),record,id,i;for(operation.setStarted(),i=0;length>i;i++)record=records[i],this.setRecord(record),record.commit(!0),id=record.getId(),void 0!==id&&-1==Ext.Array.indexOf(ids,id)&&ids.push(id);this.setIds(ids),operation.setCompleted(),operation.setSuccessful(),"function"==typeof callback&&callback.call(scope||this,operation)}})})();
                (function(){var Ext=window.Ext4||window.Ext;Ext.define("Intel.data.FastStore",{extend:"Ext.data.Store",alias:"store.faststore",constructor:function(cfg){var me=this;me.callParent(arguments)},afterEdit:function(record,modifiedFieldNames){var me=this,i,shouldSync;if(me.autoSync&&!me.autoSyncSuspended)for(i=modifiedFieldNames.length;i--;)if(record.fields.get(modifiedFieldNames[i]).persist){me.sync();break}me.onUpdate(record,Ext.data.Model.EDIT,modifiedFieldNames)}})})();
                (function(){var Ext=window.Ext4||window.Ext;Ext.define("Intel.grid.plugin.CellEditing",{alias:"plugin.fastcellediting",extend:"Ext.grid.plugin.CellEditing",triggerEvent:"cellclick",onEditComplete:function(ed,value,startValue){var me=this,activeColumn=me.getActiveColumn(),context=me.context,record;if(activeColumn){if(record=context.record,me.setActiveEditor(null),me.setActiveColumn(null),me.setActiveRecord(null),context.value=value,!me.validateEdit())return me.editing=!1,void 0;record.beginEdit(),record.isEqual(value,startValue)||record.set(activeColumn.dataIndex,value),context.view.focusRow(context.rowIdx,100),me.fireEvent("edit",me,context),record.endEdit(),me.editing=!1}}})})();
                (function(){var Ext=window.Ext4||window.Ext;Ext.define("Intel.view.ScrollTable",{extend:"Ext.view.Table",alias:"widget.scrolltableview",constructor:function(cfg){var me=this;me.callParent(arguments)},refresh:function(){var me=this,targetEl,targetParent,oldDisplay,nextSibling,dom,records,el=me.getEl(),scroll=el&&el.getScrollTop();me.rendered&&!me.isDestroyed&&(me.hasListeners.beforerefresh&&me.fireEvent("beforerefresh",me)===!1||(targetEl=me.getTargetEl(),records=me.getViewRange(),dom=targetEl.dom,me.preserveScrollOnRefresh||(targetParent=dom.parentNode,oldDisplay=dom.style.display,dom.style.display="none",nextSibling=dom.nextSibling,targetParent.removeChild(dom)),me.refreshCounter?me.clearViewEl():(me.fixedNodes=targetEl.dom.childNodes.length,me.refreshCounter=1),me.tpl.append(targetEl,me.collectData(records,me.all.startIndex)),1>records.length?(this.store.loading||me.deferEmptyText&&!me.hasFirstRefresh||Ext.core.DomHelper.insertHtml("beforeEnd",targetEl.dom,me.emptyText),me.all.clear()):(me.collectNodes(targetEl.dom),me.updateIndexes(0)),me.hasFirstRefresh&&(me.refreshSelmodelOnRefresh!==!1?me.selModel.refresh():me.selModel.pruneIf()),me.hasFirstRefresh=!0,me.preserveScrollOnRefresh||(targetParent.insertBefore(dom,nextSibling),dom.style.display=oldDisplay),Ext.suspendLayouts(),this.refreshSize(),me.fireEvent("refresh",me),Ext.resumeLayouts(!0),me.viewReady||(me.viewReady=!0,me.fireEvent("viewready",me))),scroll&&me.preserveScrollOnRefresh&&el.setScrollTop(scroll))},onRemove:function(ds,records,indexes){var me=this,fireItemRemove=me.hasListeners.itemremove,i,record,index,el=me.getEl(),scroll=el&&el.getScrollTop();if(me.all.getCount()){if(0===me.dataSource.getCount()){if(fireItemRemove)for(i=indexes.length-1;i>=0;--i)me.fireEvent("itemremove",records[i],indexes[i])}else{for(i=indexes.length-1;i>=0;--i)record=records[i],index=indexes[i],me.doRemove(record,index),fireItemRemove&&me.fireEvent("itemremove",record,index);me.updateIndexes(indexes[0])}this.refreshSize(),scroll&&me.preserveScrollOnRefresh&&el.setScrollTop(scroll)}},onUpdate:function(ds,record){var me=this,index,node,el=me.getEl(),scroll=el&&el.getScrollTop();if(me.viewReady){if(index=me.dataSource.indexOf(record),index>-1&&(node=me.bufferRender([record],index)[0],me.getNode(record)))return me.all.replaceElement(index,node,!0),me.updateIndexes(index,index),me.selModel.onUpdate(record),me.hasListeners.itemupdate&&me.fireEvent("itemupdate",record,index,node),node;scroll&&me.preserveScrollOnRefresh&&el.setScrollTop(scroll)}},onAdd:function(store,records,index){var me=this,nodes,el=me.getEl(),scroll=el&&el.getScrollTop();me.rendered&&(0===me.all.getCount()?(me.refresh(),nodes=me.all.slice()):(nodes=me.doAdd(records,index),me.refreshSelmodelOnRefresh!==!1&&me.selModel.refresh(),me.updateIndexes(index)),me.hasListeners.itemadd&&me.fireEvent("itemadd",records,index,nodes),scroll&&me.preserveScrollOnRefresh&&el.setScrollTop(scroll))},scrollRowIntoView:function(row){return 0===row?(this.getEl().setScrollTop(0),void 0):(row=this.getNode(row,!0),row&&Ext.fly(row).scrollIntoView(this.el,!1),void 0)}})})();
                (function(){var Ext=window.Ext4||window.Ext;console={log:function(){}},Ext.define("CommitMatrix",{extend:"IntelRallyApp",mixins:["WindowListener","PrettyAlert","IframeResize","ReleaseQuery","IntelWorkweek","AsyncQueue","UserAppPreferences"],layout:{type:"vbox",align:"stretch",pack:"start"},items:[{xtype:"container",itemId:"navbox",padding:"0 10px 10px 10px",layout:{type:"hbox",pack:"start"},items:[{xtype:"container",flex:3,itemId:"navbox_left",layout:"hbox",items:[{xtype:"container",flex:1,itemId:"navbox_left_vert",layout:"vbox"}]},{xtype:"container",flex:2,itemId:"navbox_right",layout:{type:"hbox",pack:"end"}}]}],minWidth:910,_prefName:"intel-SAFe-apps-preference",_loadFeatureUserStoriesInRelease:function(fRecord){var me=this,FName=fRecord.data.Name,storyStore=Ext.create("Rally.data.wsapi.Store",{model:"HierarchicalRequirement",fetch:["ObjectID","Project","Name","Feature","Children","FormattedID","PlanEstimate"],limit:1/0,context:{workspace:me.getContext().getWorkspace()._ref,project:null},filters:[{property:"Feature.ObjectID",value:fRecord.data.ObjectID}]});return me._reloadStore(storyStore).then(function(storyStore){for(var storyRecords=storyStore.data.items,i=0,len=storyRecords.length;len>i;++i){var sr=storyRecords[i],PName=sr.data.Project.Name;me.MatrixUserStoryBreakdown[PName]||(me.MatrixUserStoryBreakdown[PName]={}),me.MatrixUserStoryBreakdown[PName][FName]||(me.MatrixUserStoryBreakdown[PName][FName]=[]),me.MatrixUserStoryBreakdown[PName][FName].push(sr),me.MatrixProjectMap[PName]=sr.data.Project.ObjectID}})},_loadFeatures:function(){var me=this,featureStore=Ext.create("Rally.data.wsapi.Store",{model:"PortfolioItem/Feature",limit:1/0,remoteSort:!1,fetch:["Name","ObjectID","FormattedID","c_TeamCommits","Project","PlannedEndDate","Parent","DragAndDropRank"],context:{workspace:me.getContext().getWorkspace()._ref,project:null},filters:[me._getFeatureFilter(me.TrainRecord,me.ReleaseRecord)]});return me._reloadStore(featureStore).then(function(featureStore){var promises=[],featureRecords=featureStore.data.items;return me.FeatureStore=featureStore,console.log("features loaded:",featureRecords),featureRecords.forEach(function(fr){var frData=fr.data;frData.Parent?promises.push(me._loadMilestone(frData.Parent.ObjectID).then(function(milestoneRecord){var p=milestoneRecord.data.Parent;me.FeatureProductHash[frData.ObjectID]=p&&p.Name?p.Name:""})):me.FeatureProductHash[frData.ObjectID]="",promises.push(me._loadFeatureUserStoriesInRelease(fr))}),Q.all(promises).fail(function(reason){me._alert("ERROR",reason||"Failed to load Features")})})},_getProjectsInScope:function(){var projects="__PROJECT_OIDS_IN_SCOPE__";return projects=projects.match(/^\d+/)?projects.split(","):[this.context.getProject().ObjectID],projectsInScope={},_.each(projects,function(projectID){projectsInScope[projectID]=!0}),projectsInScope},_addDefaultProjectsToStructures:function(msub,mpm,feats,projects){var me=this;_.each(projects,function(p){msub[p.data.Name]||(msub[p.data.Name]={},_.each(feats,function(f){msub[p.data.Name][f.data.Name]=[],mpm[p.data.Name]=p.data.ObjectID}))})},_loadDefaultProjects:function(){var me=this,inScope=me._getProjectsInScope(),ignoreTeams={"All Releases":!0,"All Scrums":!0},msub=me.MatrixUserStoryBreakdown,feats=me.FeatureStore.data.items,mpm=me.MatrixProjectMap,projectStore=Ext.create("Rally.data.wsapi.Store",{model:"Project",fetch:["Name","Parent","ObjectID","TeamMembers"],limit:1/0,context:{workspace:me.getContext().getWorkspace()._ref,project:null}});return me._reloadStore(projectStore).then(function(projectStore){var projects=projectStore.data.items;projects=_.filter(projects,function(project){return inScope[project.data.ObjectID]&&!ignoreTeams[project.data.Name]&&project.data.TeamMembers.Count>0}),me._addDefaultProjectsToStructures(msub,mpm,feats,projects),console.log("default projects",projects)})},_getTeamCommitFromFeature:function(featureRecord){var me=this,tcString=featureRecord.data.c_TeamCommits;try{return JSON.parse(atob(tcString))||{}}catch(e){return{}}},_getTeamCommit:function(featureRecord,ProjectName){var me=this,projectID=me.MatrixProjectMap[ProjectName],featureTC=me._getTeamCommitFromFeature(featureRecord);return featureTC[projectID]||{}},_setTeamCommitsField:function(featureRecord,ProjectName,field,value){var me=this,projectID=me.MatrixProjectMap[ProjectName],featureTC=me._getTeamCommitFromFeature(featureRecord),deferred=Q.defer();featureTC[projectID]||(featureTC[projectID]={}),featureTC[projectID][field]=value;var str=btoa(JSON.stringify(featureTC,null,"	"));return str.length>=32768?deferred.reject("TeamCommits field for "+featureRecord.data.FormattedID+" ran out of space! Cannot save"):(featureRecord.set("c_TeamCommits",str),featureRecord.save({callback:function(record,operation,success){success?deferred.resolve(featureRecord):deferred.reject("Failed to modify Feature "+featureRecord.data.FormattedID)}})),deferred.promise},_getGridHeight:function(){var me=this,loc=window.location,iframe=Ext.get(window.parent.document.querySelector('iframe[src="'+loc.pathname+loc.search+'"]'));return iframe.getHeight()-me.down("#navbox").getHeight()},_getGridWidth:function(columnCfgs){var me=this;return me.MatrixGrid?Math.min(_.reduce(columnCfgs,function(item,sum){return sum+item.width},20),window.parent.innerWidth-20):void 0},_changeGridSize:function(){var me=this;me.MatrixGrid&&me.MatrixGrid.setSize(me._getGridWidth(me.MatrixGrid.config.columnCfgs),me._getGridHeight())},_initGridResize:function(){var me=this;me._addWindowEventListener&&me._addWindowEventListener("resize",me._changeGridSize.bind(me))},_clearToolTip:function(){var me=this;me.tooltip&&(me.tooltip.panel.hide(),me.tooltip.triangle.hide(),me.tooltip.panel.destroy(),me.tooltip.triangle.destroy(),me.tooltip=null)},_setCellColor:function(td,commitment,expected,managerComment,usCount){var classList=td.classList,colorClassBase="intel-team-commits-",expectedClass="manager-expected-cell-small",commentClass="manager-comment-cell-small",expectedCommentClass="manager-expected-comment-cell-small",oldExpected=classList.contains(expectedClass),oldComment=classList.contains(commentClass),oldExpectedComment=classList.contains(expectedCommentClass),oldColorClass=_.find(classList,function(c){return c.indexOf(colorClassBase)>-1}),newColorClass;switch(commitment){case"Undecided":newColorClass=colorClassBase+"WHITE";break;case"N/A":newColorClass=colorClassBase+"GREY";break;case"Committed":newColorClass=colorClassBase+"GREEN";break;case"Not Committed":newColorClass=colorClassBase+"RED";break;default:newColorClass=colorClassBase+"WHITE"}(expected!==oldExpected||managerComment!=oldComment||oldExpectedComment!=expected||oldExpectedComment!=managerComment||oldColorClass!=newColorClass||1*td.innerText!==1*usCount)&&(td.childNodes[0].innerText=usCount,td.classList.remove(oldColorClass),td.classList.add(newColorClass),expected&&managerComment?td.classList.add(expectedCommentClass):(td.classList.remove(expectedCommentClass),expected?td.classList.add(expectedClass):td.classList.remove(expectedClass),managerComment?td.classList.add(commentClass):td.classList.remove(commentClass)))},_getDistanceFromBottomOfScreen:function(innerY){var me=this,loc=window.location,iframe=window.parent.document.querySelector('iframe[src="'+loc.pathname+loc.search+'"]'),ph=window.parent.getWindowHeight(),ps=window.parent.getScrollY(),ofy=ps+iframe.getBoundingClientRect().top,actualY=ofy+innerY;return ph-actualY},_showGrids:function(){var me=this;me._loadMatrixGrid()},_updateGrids:function(){var me=this;me.FeatureStore&&me.CustomMatrixStore&&me.CustomMatrixStore.intelUpdate()},_reloadStores:function(){var me=this,promises=[];return me.FeatureStore?promises.push(me._reloadStore(me.FeatureStore)):(me.MatrixUserStoryBreakdown={},me.MatrixProjectMap={},me.FeatureProductHash={},promises.push(me._loadFeatures().then(function(){return me._loadDefaultProjects()}))),Q.all(promises)},_reloadEverything:function(){var me=this;me._clearToolTip(),me.MatrixGrid&&(me.MatrixGrid.up().remove(me.MatrixGrid),me.MatrixGrid=void 0),me.ProductPicker&&(me.ProductPicker.up().remove(me.ProductPicker),me.ProductPicker=void 0),me.UserStoryStore=void 0,me.FeatureStore=void 0,me.CustomMatrixStore=void 0,me.setLoading(!0),me.ReleasePicker?me._loadProductPicker():(me._loadReleasePicker(),me._loadModePicker(),me._loadProductPicker(),me._loadMatrixLegend()),me.setLoading(!0),me._enqueue(function(unlockFunc){me._reloadStores().then(function(){me._updateGrids()}).then(function(){me.setLoading(!1),me._showGrids(),unlockFunc()}).fail(function(reason){me.setLoading(!1),me._alert("ERROR",reason),unlockFunc()}).done()})},_refreshDataFunc:function(){var me=this;me._enqueue(function(unlockFunc){me._reloadStores().then(function(){me._updateGrids(),unlockFunc()}).fail(function(reason){me._alert("ERROR",reason),me._removeLoadingMasks(),unlockFunc()}).done()})},_setRefreshInterval:function(){var me=this;me.RefreshInterval=setInterval(function(){me._refreshDataFunc()},1e4)},launch:function(){var me=this;me.Mode="Details",me._initDisableResizeHandle(),me._initFixRallyDashboard(),me._initGridResize(),me.setLoading(!0),me.getContext().getPermissions().isProjectEditor(me.getContext().getProject())?me._loadModels().then(function(){var scopeProject=me.getContext().getProject();return me._loadProject(scopeProject.ObjectID)}).then(function(scopeProjectRecord){return me.ProjectRecord=scopeProjectRecord,me._loadPreferences()}).then(function(appPrefs){return me.AppPrefs=appPrefs,me._projectInWhichTrain(me.ProjectRecord)}).then(function(trainRecord){return trainRecord&&me.ProjectRecord.data.ObjectID==trainRecord.data.ObjectID?(me.TrainRecord=trainRecord,me.ProjectRecord=trainRecord,console.log("train loaded:",trainRecord),me._loadProducts(trainRecord)):Q.reject("You are not scoped to a train.")}).then(function(productStore){me.ProductNames=_.map(productStore.data.items,function(product){return{ProductName:product.data.Name}}),me.ProductNames=[{ProductName:"All Products"}].concat(me.ProductNames);var threeWeeksAgo=1*new Date-18144e5;return me._loadReleasesAfterGivenDate(me.ProjectRecord,threeWeeksAgo)}).then(function(releaseStore){me.ReleaseStore=releaseStore;var currentRelease=me._getScopedRelease(me.ReleaseStore.data.items,me.ProjectRecord.data.ObjectID,me.AppPrefs);return currentRelease?(me.ReleaseRecord=currentRelease,me._workweekData=me._getWorkWeeksForDropdown(currentRelease.data.ReleaseStartDate,currentRelease.data.ReleaseDate),console.log("release loaded",currentRelease),me._setRefreshInterval(),me._reloadEverything(),void 0):Q.reject("This train has no releases.")}).fail(function(reason){me.setLoading(!1),me._alert("ERROR",reason||"")}).done():(me.setLoading(!1),me._alert("ERROR","You do not have permissions to edit this project"))},_releasePickerSelected:function(combo,records){var me=this;if(me.ReleaseRecord.data.Name!==records[0].data.Name){me.setLoading(!0),me.ReleaseRecord=me.ReleaseStore.findExactRecord("Name",records[0].data.Name),me._workweekData=me._getWorkWeeksForDropdown(me.ReleaseRecord.data.ReleaseStartDate,me.ReleaseRecord.data.ReleaseDate);var pid=me.ProjectRecord.data.ObjectID;"object"!=typeof me.AppPrefs.projs[pid]&&(me.AppPrefs.projs[pid]={}),me.AppPrefs.projs[pid].Release=me.ReleaseRecord.data.ObjectID,me._savePreferences(me.AppPrefs).then(function(){me._reloadEverything()}).fail(function(reason){me._alert("ERROR",reason||""),me.setLoading(!1)}).done()}},_loadReleasePicker:function(){var me=this;me.ReleasePicker=me.down("#navbox_left_vert").add({xtype:"intelreleasepicker",labelWidth:80,width:200,releases:me.ReleaseStore.data.items,currentRelease:me.ReleaseRecord,listeners:{change:function(combo,newval,oldval){0===newval.length&&combo.setValue(oldval)},select:me._releasePickerSelected.bind(me)}})},_modePickerSelected:function(combo,records){var me=this,value=records[0].data.Mode;value!==me.Mode&&(me.Mode=value,me._clearToolTip())},_loadModePicker:function(){var me=this;me.ModePicker=me.down("#navbox_left_vert").add({xtype:"intelfixedcombo",fieldLabel:"Click Mode",labelWidth:80,width:200,store:Ext.create("Ext.data.Store",{fields:["Mode"],data:[{Mode:"Flag"},{Mode:"Comment"},{Mode:"Details"}]}),displayField:"Mode",value:me.Mode,listeners:{select:me._modePickerSelected.bind(me)}})},_productPickerSelected:function(combo,records){var me=this,value=records[0].data.ProductName;me.CustomMatrixStore.clearFilter(),"All Products"!==value&&me.CustomMatrixStore.addFilter(new Ext.util.Filter({filterFn:function(matrixRecord){return matrixRecord.data.ProductName===value}})),me._clearToolTip()},_loadProductPicker:function(){var me=this;me.ProductPicker=me.down("#navbox_left_vert").add({xtype:"intelfixedcombo",fieldLabel:"Product Filter",labelWidth:80,width:200,store:Ext.create("Ext.data.Store",{fields:["ProductName"],data:me.ProductNames}),displayField:"ProductName",value:"All Products",listeners:{select:me._productPickerSelected.bind(me)}})},_loadMatrixLegend:function(){var me=this;me.MatrixLegend=me.down("#navbox_right").add({xtype:"container",width:120,layout:{type:"vbox",align:"stretch",pack:"start"},border:!0,frame:!1,items:_.map(["Committed","Not Committed","N/A","Undefined","Expected","CE Comment"],function(name){var color;return"Undecided"===name&&(color="white"),"N/A"===name&&(color="rgba(224, 224, 224, 0.50)"),"Committed"===name&&(color="rgba(0, 255, 0, 0.50)"),"Not Committed"===name&&(color="rgba(255, 0, 0, 0.50)"),"Expected"===name&&(color="rgba(251, 255, 0, 0.50)"),"CE Comment"===name&&(color="rgba(76, 76, 255, 0.50)"),{xtype:"container",width:120,border:!1,frame:!1,html:'<div class="intel-legend-item">'+name+': <div style="background-color:'+color+'" class="intel-legend-dot"></div></div>'}})})},_loadMatrixGrid:function(){var me=this,sortedFeatures=_.sortBy(me.FeatureStore.data.items,function(f){return f.data.DragAndDropRank}),customMatrixRecords=_.map(sortedFeatures,function(featureRecord,index){return{Rank:index+1,FormattedID:featureRecord.data.FormattedID,ObjectID:featureRecord.data.ObjectID,FeatureName:featureRecord.data.Name,ProductName:me.FeatureProductHash[featureRecord.data.ObjectID],PlannedEndDate:1*featureRecord.data.PlannedEndDate}});me.CustomMatrixStore=Ext.create("Intel.data.FastStore",{data:customMatrixRecords,model:"CommitsMatrixFeature",autoSync:!0,limit:1/0,proxy:{type:"fastsessionproxy",id:"Session-proxy-"+Math.random()},intelUpdate:function(){for(var store=me.CustomMatrixStore,records=store.data.items,projectNames=Object.keys(me.MatrixUserStoryBreakdown).sort(),pnamesLength=projectNames.length,i=0,len=records.length;len>i;++i)for(var matrixRecord=records[i],featureRecord=me.FeatureStore.findExactRecord("ObjectID",matrixRecord.data.ObjectID),tr=me.MatrixGrid.view.getNode(i),j=0;pnamesLength>j;++j){var projectName=projectNames[j],usCount=(me.MatrixUserStoryBreakdown[projectName][featureRecord.data.Name]||[]).length,td=tr.childNodes[j],teamCommit=me._getTeamCommit(featureRecord,projectName),expected=teamCommit.Expected||!1,managerComment=!!teamCommit.ManagerComment,commitment=teamCommit.Commitment||"Undecided";me._setCellColor(td,commitment,expected,managerComment,usCount)}}});var defColumnCfgs=[{text:"Rank",dataIndex:"Rank",width:50,maxHeight:80,editor:!1,sortable:!0,resizable:!1,draggable:!1,menuDisabled:!0,locked:!0},{text:"F#",dataIndex:"FormattedID",width:50,maxHeight:80,editor:!1,sortable:!0,resizable:!1,draggable:!1,menuDisabled:!0,locked:!0,renderer:function(FID){var feature=me.FeatureStore.findExactRecord("FormattedID",FID);if(feature.data.Project){var pid=feature.data.Project._ref.split("/project/")[1];return'<a href="https://rally1.rallydev.com/#/'+pid+"d/detail/portfolioitem/feature/"+feature.data.ObjectID+'" target="_blank">'+FID+"</a>"}return name}},{text:"Feature",dataIndex:"FeatureName",width:200,maxHeight:80,editor:!1,resizable:!1,draggable:!1,menuDisabled:!0,locked:!0,sortable:!0,renderer:function(value,metaData){return metaData.tdAttr='title="'+value+'"',value}},{text:"Product",dataIndex:"ProductName",width:60,maxHeight:80,editor:!1,sortable:!0,resizable:!1,draggable:!1,menuDisabled:!0,locked:!0},{text:"Planned End",dataIndex:"PlannedEndDate",width:60,maxHeight:80,editor:!1,resizable:!1,draggable:!1,menuDisabled:!0,locked:!0,sortable:!0,renderer:function(date){return date?"ww"+me._getWorkweek(date):"-"}}],columnCfgs=defColumnCfgs.slice();Object.keys(me.MatrixUserStoryBreakdown).sort().forEach(function(ProjectName){columnCfgs.push({text:ProjectName,dataIndex:"ObjectID",width:50,maxHeight:80,editor:"textfield",draggable:!1,menuDisabled:!0,align:"center",tdCls:"intel-editor-cell",sortable:!1,resizable:!1,tooltip:ProjectName,tooltipType:"title",renderer:function(oid,metaData,matrixRecord,row,col){var featureRecord=me.FeatureStore.findExactRecord("ObjectID",matrixRecord.data.ObjectID);if(featureRecord){var array=me.MatrixUserStoryBreakdown[ProjectName][featureRecord.data.Name]||[],count=array.length,teamCommit=me._getTeamCommit(featureRecord,ProjectName),expected=teamCommit.Expected||!1,managerComment=teamCommit.ManagerComment||!1,commitment=teamCommit.Commitment||"Undecided";return"Undecided"===commitment?metaData.tdCls+=" intel-team-commits-WHITE":"N/A"===commitment?metaData.tdCls+=" intel-team-commits-GREY":"Committed"===commitment?metaData.tdCls+=" intel-team-commits-GREEN":"Not Committed"===commitment&&(metaData.tdCls+=" intel-team-commits-RED"),expected&&managerComment?metaData.tdCls+=" manager-expected-comment-cell-small":(expected&&(metaData.tdCls+=" manager-expected-cell-small"),managerComment&&(metaData.tdCls+=" manager-comment-cell-small")),count}}})}),me.MatrixGrid=me.add({xtype:"grid",width:me._getGridWidth(columnCfgs),height:me._getGridHeight(),scroll:"both",resizable:!1,columns:columnCfgs,disableSelection:!0,plugins:["fastcellediting"],viewConfig:{xtype:"scrolltableview",preserveScrollOnRefresh:!0},listeners:{sortchange:function(){me._clearToolTip()},beforeedit:function(editor,e){var projectName=e.column.text,matrixRecord=e.record;return"Flag"===me.Mode&&(me.MatrixGrid.setLoading(!0),me._enqueue(function(unlockFunc){me._loadFeature(matrixRecord.data.ObjectID).then(function(featureRecord){var tcae=me._getTeamCommit(featureRecord,projectName);return me._setTeamCommitsField(featureRecord,projectName,"Expected",!tcae.Expected)}).then(function(featureRecord){me.MatrixGrid.setLoading(!1);var storeRecord=me.FeatureStore.findExactRecord("ObjectID",matrixRecord.data.ObjectID);storeRecord.data.c_TeamCommits=featureRecord.data.c_TeamCommits,me.MatrixGrid.view.refreshNode(me.CustomMatrixStore.indexOf(matrixRecord)),unlockFunc()}).fail(function(reason){me.MatrixGrid.setLoading(!1),me._alert("ERROR",reason||""),unlockFunc()}).done()})),!1},afterrender:function(grid){var view=grid.view.normalView;view.getEl().on("scroll",function(){me._clearToolTip()}),grid.mon(view,{uievent:function(type,view,cell,row,col,e){if(("Details"===me.Mode||"Comment"===me.Mode)&&"mousedown"===type){var matrixRecord=me.CustomMatrixStore.getAt(row),ProjectName=view.getGridColumns()[col].text,featureRecord=me.FeatureStore.findRecord("ObjectID",matrixRecord.data.ObjectID),teamCommit=me._getTeamCommit(featureRecord,ProjectName),oldTooltip=me.tooltip,pos=cell.getBoundingClientRect(),dbs=me._getDistanceFromBottomOfScreen(pos.top),panelWidth=400;if(oldTooltip&&me._clearToolTip(),oldTooltip&&oldTooltip.row==row&&oldTooltip.col==col)return;if("Details"===me.Mode){var panelHTML=["<p><b>CE Comment:</b> "+(teamCommit.ManagerComment||"")+"</p>","<p><b>Objective:</b> "+(teamCommit.Objective||"")+"</p>","<p><b>PlanEstimate: </b>",_.reduce(me.MatrixUserStoryBreakdown[ProjectName][featureRecord.data.Name]||[],function(sum,sr){return sum+(0===sr.data.Children.Count?sr.data.PlanEstimate||0:0)},0),'<p><b>UserStories: </b><div style="max-height:200px;overflow-y:auto;"><ol>'].join("");(me.MatrixUserStoryBreakdown[ProjectName][featureRecord.data.Name]||[]).forEach(function(sr){panelHTML+='<li><a href="https://rally1.rallydev.com/#/'+sr.data.Project.ObjectID+"d/detail/userstory/"+sr.data.ObjectID+'" target="_blank">'+sr.data.FormattedID+"</a>:"+'<span title="'+sr.data.Name+'">'+sr.data.Name.substring(0,40)+(sr.data.Name.length>40?"...":"")+"</span></li>"}),panelHTML+="</ol></div>",me.tooltip={row:row,col:col,panel:Ext.widget("container",{floating:!0,width:panelWidth,autoScroll:!1,id:"MatrixTooltipPanel",cls:"intel-tooltip",focusOnToFront:!1,shadow:!1,renderTo:Ext.getBody(),html:panelHTML,listeners:{afterrender:function(panel){var upsideDown=panel.getHeight()+80>dbs;panel.setPosition(pos.left-panelWidth,upsideDown?pos.bottom-panel.getHeight():pos.top)}}})}}else me.tooltip={row:row,col:col,panel:Ext.widget("container",{floating:!0,width:panelWidth,autoScroll:!1,id:"MatrixTooltipPanel",cls:"intel-tooltip",focusOnToFront:!1,shadow:!1,renderTo:Ext.getBody(),items:[{xtype:"container",layout:"hbox",items:[{xtype:"text",flex:1,text:"Comment:",style:"font-weight:bold;"},{xtype:"checkbox",width:140,boxLabel:"CE Expected",checked:teamCommit.Expected,handler:function(checkbox,checked){me.tooltip.panel.setLoading(!0),me._enqueue(function(unlockFunc){me._loadFeature(matrixRecord.data.ObjectID).then(function(featureRecord){var tcae=me._getTeamCommit(featureRecord,ProjectName);return me._setTeamCommitsField(featureRecord,ProjectName,"Expected",!tcae.Expected)}).then(function(featureRecord){me.tooltip.panel.setLoading(!1);var storeRecord=me.FeatureStore.findExactRecord("ObjectID",matrixRecord.data.ObjectID);storeRecord.data.c_TeamCommits=featureRecord.data.c_TeamCommits,me.MatrixGrid.view.refreshNode(me.CustomMatrixStore.indexOf(matrixRecord)),unlockFunc()}).fail(function(reason){me.tooltip.panel.setLoading(!1),me._alert("ERROR",reason||""),unlockFunc()}).done()})}}]},{xtype:"textarea",value:teamCommit.ManagerComment||"",width:"95%",id:"MatrixTooltipPanelTextarea"},{xtype:"button",margin:"0 10 0 0",text:"Close",listeners:{click:function(){me._clearToolTip()}}},{xtype:"button",text:"Save",listeners:{click:function(){me.MatrixGrid.setLoading(!0);var val=Ext.getCmp("MatrixTooltipPanelTextarea").getValue();me._loadFeature(featureRecord.data.ObjectID).then(function(featureRecord){return me._setTeamCommitsField(featureRecord,ProjectName,"ManagerComment",val)}).then(function(featureRecord){var storeRecord=me.FeatureStore.findExactRecord("ObjectID",featureRecord.data.ObjectID);storeRecord.data.c_TeamCommits=featureRecord.data.c_TeamCommits,me.MatrixGrid.view.refreshNode(row)}).fail(function(reason){me._alert("Error:",reason)}).then(function(){me.MatrixGrid.setLoading(!1)}).done()}}}],listeners:{afterrender:function(panel){var upsideDown=panel.getHeight()+80>dbs;panel.setPosition(pos.left-panelWidth,upsideDown?pos.bottom-panel.getHeight():pos.top)}}})};me.tooltip.triangle=Ext.widget("container",{floating:!0,width:0,height:0,focusOnToFront:!1,shadow:!1,renderTo:Ext.getBody(),listeners:{afterrender:function(panel){setTimeout(function(){var upsideDown=Ext.get("MatrixTooltipPanel").getHeight()+80>dbs;upsideDown?(panel.removeCls("intel-tooltip-triangle"),panel.addCls("intel-tooltip-triangle-up"),panel.setPosition(pos.left-10,pos.bottom-10)):(panel.removeCls("intel-tooltip-triangle-up"),panel.addCls("intel-tooltip-triangle"),panel.setPosition(pos.left-10,pos.top))},10)}}})}}})}},enableEditing:!1,store:me.CustomMatrixStore})}})})();

            Rally.launchApp('CommitMatrix', {
                name:"ART Commit Matrix",
	            parentRepos:""
            });

        });
    </script>


    <style type="text/css">
        .x-grid-cell.manager-expected-cell{background-image:-o-linear-gradient(right top, rgba(0,0,0,0) 75%, #fbff00 75%) !important;background-image:-moz-linear-gradient(right top, rgba(0,0,0,0) 75%, #fbff00 75%) !important;background-image:-webkit-linear-gradient(right top, rgba(0,0,0,0) 75%, #fbff00 75%) !important;background-image:-ms-linear-gradient(right top, rgba(0,0,0,0) 75%, #fbff00 75%) !important;background-image:linear-gradient(to right top, rgba(0,0,0,0) 75%, #fbff00 75%) !important;background-size:100% 30px;background-repeat:no-repeat}.x-grid-cell.manager-expected-cell-small{background-image:-o-linear-gradient(right top, rgba(0,0,0,0) 75%, #fbff00 75%) !important;background-image:-moz-linear-gradient(right top, rgba(0,0,0,0) 75%, #fbff00 75%) !important;background-image:-webkit-linear-gradient(right top, rgba(0,0,0,0) 75%, #fbff00 75%) !important;background-image:-ms-linear-gradient(right top, rgba(0,0,0,0) 75%, #fbff00 75%) !important;background-image:linear-gradient(to right top, rgba(0,0,0,0) 75%, #fbff00 75%) !important;background-size:100% 20px;background-repeat:no-repeat}.x-grid-cell.manager-comment-cell-small{background-image:-o-linear-gradient(left top, rgba(0,0,0,0) 75%, #4c4cff 75%) !important;background-image:-moz-linear-gradient(left top, rgba(0,0,0,0) 75%, #4c4cff 75%) !important;background-image:-webkit-linear-gradient(left top, rgba(0,0,0,0) 75%, #4c4cff 75%) !important;background-image:-ms-linear-gradient(left top, rgba(0,0,0,0) 75%, #4c4cff 75%) !important;background-image:linear-gradient(to left top, rgba(0,0,0,0) 75%, #4c4cff 75%) !important;background-size:100% 20px;background-repeat:no-repeat}.x-grid-cell.manager-expected-comment-cell-small{background-image:-o-linear-gradient(left top, rgba(0,0,0,0) 75%, #4c4cff 75%),-o-linear-gradient(right top, rgba(0,0,0,0) 75%, #fbff00 75%) !important;background-image:-moz-linear-gradient(left top, rgba(0,0,0,0) 75%, #4c4cff 75%),-moz-linear-gradient(right top, rgba(0,0,0,0) 75%, #fbff00 75%) !important;background-image:-webkit-linear-gradient(left top, rgba(0,0,0,0) 75%, #4c4cff 75%),-webkit-linear-gradient(right top, rgba(0,0,0,0) 75%, #fbff00 75%) !important;background-image:-ms-linear-gradient(left top, rgba(0,0,0,0) 75%, #4c4cff 75%),-ms-linear-gradient(right top, rgba(0,0,0,0) 75%, #fbff00 75%) !important;background-image:linear-gradient(to left top, rgba(0,0,0,0) 75%, #4c4cff 75%),linear-gradient(to right top, rgba(0,0,0,0) 75%, #fbff00 75%) !important;background-size:100% 20px;background-repeat:no-repeat}.x-grid-cell.intel-team-commits-RED{background-color:rgba(255,0,0,0.5) !important}.x-grid-row-selected .x-grid-cell.intel-team-commits-RED,.x-grid-row-over .x-grid-cell.intel-team-commits-RED{background-color:rgba(255,0,0,0.7) !important}.x-grid-cell.intel-team-commits-GREEN{background-color:rgba(0,255,0,0.5) !important}.x-grid-row-selected .x-grid-cell.intel-team-commits-GREEN,.x-grid-row-over .x-grid-cell.intel-team-commits-GREEN{background-color:rgba(0,255,0,0.7) !important}.x-grid-cell.intel-team-commits-GREY{background-color:rgba(183,183,183,0.5) !important}.x-grid-row-selected .x-grid-cell.intel-team-commits-GREY,.x-grid-row-over .x-grid-cell.intel-team-commits-GREY{background-color:rgba(183,183,183,0.7) !important}
    </style>
    <style type="text/css">
        .x-grid-row .intel-editor-cell{cursor:pointer !important}.x-grid-row .intel-editor-cell *{cursor:pointer !important}.intel-legend-dot{width:12px;height:12px;border-radius:6px;border:1px solid black;display:inline-block;vertical-align:middle}.intel-legend-item{font-size:1em;text-align:right}.intel-tooltip{padding:10px;background-color:#C0D9FA;border-radius:8px;z-index:500}.intel-tooltip p{margin:2px 0 2px 0}.intel-tooltip ol{margin:2px 0 2px 0;padding-left:20px}.intel-tooltip-triangle{border-left:10px solid transparent;border-right:10px solid transparent;border-top:10px solid #C0D9FA;height:0px;width:0px;z-index:500}.intel-tooltip-triangle-up{border-left:10px solid transparent;border-right:10px solid transparent;border-bottom:10px solid #C0D9FA;height:0px;width:0px;z-index:500}.x-column-header-inner .x-column-header-text{white-space:normal !important;line-height:15px}.x-column-header-inner{text-align:center;height:100 !important}
    </style>
</head>
<body>
</body>
</html>
